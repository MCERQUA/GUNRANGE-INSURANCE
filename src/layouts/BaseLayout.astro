---
import '../styles/global.css';
import MetalMenuBar from '../components/ui/MetalMenuBar.tsx';

export interface Props {
  title: string;
  description?: string;
}

const { title, description = 'Gun Range Insurance - Comprehensive coverage for shooting ranges, firearms businesses, and gun clubs' } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <title>{title} | Gun Range Insurance</title>
    
    <!-- Favicon configuration -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    
    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Pannellum CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css">
    
    <style>
      #panorama {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
      }
      
      /* Light vignette overlay */
      .panorama-overlay {
        position: fixed;
        inset: 0;
        background: 
          radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.2) 100%),
          linear-gradient(to bottom, rgba(0,0,0,0.15) 0%, transparent 20%, transparent 80%, rgba(0,0,0,0.25) 100%);
        pointer-events: none;
        z-index: -1;
      }
      
      /* Remove the additional hero backdrop */
      
      /* Hide Pannellum controls we don't want */
      .pnlm-compass,
      .pnlm-controls-container {
        display: none !important;
      }
    </style>
  </head>
  <body class="bg-tactical-black text-smoke">
    <!-- 360 Panorama Background -->
    <div id="panorama"></div>
    
    <!-- Enhanced overlay gradient with vignette -->
    <div class="panorama-overlay"></div>
    
    <!-- Navigation -->
    <MetalMenuBar client:load />
    
    <!-- Main Content -->
    <main class="min-h-screen relative z-10">
      <slot />
    </main>
    
    <!-- Pannellum JS -->
    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        pannellum.viewer('panorama', {
          "type": "equirectangular",
          "panorama": "/images/RANGE-360.jpg",
          "autoLoad": true,
          "autoRotate": -2,
          "compass": false,
          "showZoomCtrl": false,
          "showFullscreenCtrl": false,
          "mouseZoom": false,
          "keyboardZoom": false,
          "hfov": 100,
          "minHfov": 80,
          "maxHfov": 120,
          "pitch": 0,
          "yaw": 180,
          "hotSpotDebug": false
        });
      });
    </script>
  </body>
</html>
